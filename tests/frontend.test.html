<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frontend Test Suite - Multi-Agent Code Generation System</title>
    
    <!-- Test styling -->
    <style>
        :root {
            --test-bg: #1a1a1a;
            --test-text: #ffffff;
            --test-success: #22c55e;
            --test-error: #ef4444;
            --test-warning: #f59e0b;
            --test-info: #3b82f6;
            --test-border: #374151;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Monaco', 'Consolas', monospace;
            background: var(--test-bg);
            color: var(--test-text);
            line-height: 1.6;
            padding: 20px;
        }

        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .test-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid var(--test-border);
            border-radius: 8px;
        }

        .test-header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--test-info);
        }

        .test-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .test-stat {
            padding: 15px;
            border: 1px solid var(--test-border);
            border-radius: 8px;
            text-align: center;
        }

        .test-stat h3 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .test-stat.passed h3 {
            color: var(--test-success);
        }

        .test-stat.failed h3 {
            color: var(--test-error);
        }

        .test-stat.skipped h3 {
            color: var(--test-warning);
        }

        .test-suite {
            margin-bottom: 30px;
            border: 1px solid var(--test-border);
            border-radius: 8px;
            overflow: hidden;
        }

        .test-suite-header {
            background: #2d2d2d;
            padding: 15px;
            font-weight: bold;
            font-size: 1.1rem;
            border-bottom: 1px solid var(--test-border);
        }

        .test-case {
            padding: 10px 15px;
            border-bottom: 1px solid var(--test-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .test-case:last-child {
            border-bottom: none;
        }

        .test-case.passed {
            background: rgba(34, 197, 94, 0.1);
            border-left: 4px solid var(--test-success);
        }

        .test-case.failed {
            background: rgba(239, 68, 68, 0.1);
            border-left: 4px solid var(--test-error);
        }

        .test-case.skipped {
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid var(--test-warning);
        }

        .test-name {
            font-size: 0.9rem;
        }

        .test-status {
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
        }

        .test-status.passed {
            background: var(--test-success);
            color: white;
        }

        .test-status.failed {
            background: var(--test-error);
            color: white;
        }

        .test-status.skipped {
            background: var(--test-warning);
            color: white;
        }

        .test-output {
            margin-top: 10px;
            padding: 10px;
            background: #000;
            border-radius: 4px;
            font-size: 0.8rem;
            white-space: pre-wrap;
            display: none;
        }

        .test-case.failed .test-output {
            display: block;
            color: var(--test-error);
        }

        .run-tests-btn {
            background: var(--test-info);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            margin: 20px 0;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .run-tests-btn:hover {
            background: #2563eb;
        }

        .run-tests-btn:disabled {
            background: #6b7280;
            cursor: not-allowed;
        }

        .mock-container {
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #374151;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: var(--test-info);
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>Frontend Test Suite</h1>
            <p>Multi-Agent Code Generation System</p>
            <div class="progress-bar">
                <div class="progress-fill" id="testProgress"></div>
            </div>
        </div>

        <div class="test-stats">
            <div class="test-stat passed">
                <h3 id="passedCount">0</h3>
                <p>Passed</p>
            </div>
            <div class="test-stat failed">
                <h3 id="failedCount">0</h3>
                <p>Failed</p>
            </div>
            <div class="test-stat skipped">
                <h3 id="skippedCount">0</h3>
                <p>Skipped</p>
            </div>
            <div class="test-stat">
                <h3 id="totalCount">0</h3>
                <p>Total</p>
            </div>
        </div>

        <button class="run-tests-btn" id="runTestsBtn" onclick="runAllTests()">
            Run All Tests
        </button>

        <div id="testResults"></div>

        <!-- Mock DOM elements for testing -->
        <div class="mock-container" id="mockContainer">
            <!-- Add mock elements here as needed -->
            <div id="projectForm">
                <input id="projectName" name="name" value="">
                <select id="projectType" name="project_type">
                    <option value="web_app">Web App</option>
                </select>
                <textarea id="projectDescription" name="description"></textarea>
                <select id="languages" name="languages" multiple>
                    <option value="python">Python</option>
                    <option value="javascript">JavaScript</option>
                </select>
                <input id="frameworks" name="frameworks" value="">
                <select id="complexity" name="complexity">
                    <option value="simple">Simple</option>
                    <option value="moderate" selected>Moderate</option>
                </select>
                <input id="features" name="features" value="">
                <select id="mode" name="mode">
                    <option value="full">Full</option>
                </select>
                <button id="generateBtn">Generate</button>
            </div>
            
            <div id="progressCard" style="display: none;">
                <div id="progressFill"></div>
                <div id="progressText"></div>
                <div id="currentStep"></div>
            </div>
            
            <div id="fileTreeCard" style="display: none;">
                <div id="fileTree"></div>
            </div>
            
            <div id="chatMessages"></div>
            <div id="logsContainer"></div>
            <div id="systemStats">
                <div id="activeJobs">0</div>
                <div id="totalJobs">0</div>
                <div id="cpuUsage">0%</div>
                <div id="memoryUsage">0%</div>
                <div id="avgResponseTime">0ms</div>
                <div id="uptime">0h</div>
            </div>
            
            <div id="recentProjects"></div>
            <div id="connectionStatus">
                <span>Connected</span>
            </div>
            
            <div id="settingsModal" class="modal">
                <div class="modal-content">
                    <input id="apiKey" type="password">
                    <input id="backendUrl" type="url" value="http://localhost:8000">
                </div>
            </div>
            
            <div id="uploadModal" class="modal">
                <div class="modal-content">
                    <input id="uploadFile" type="file">
                    <input id="uploadPath" type="text">
                </div>
            </div>
            
            <div id="sandpack-container"></div>
        </div>
    </div>

    <!-- Include DOMPurify for testing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.5/purify.min.js"></script>

    <script>
        // Test Framework
        class TestFramework {
            constructor() {
                this.tests = [];
                this.currentSuite = null;
                this.results = {
                    passed: 0,
                    failed: 0,
                    skipped: 0,
                    total: 0
                };
            }

            describe(suiteName, callback) {
                this.currentSuite = {
                    name: suiteName,
                    tests: []
                };
                callback();
                this.tests.push(this.currentSuite);
                this.currentSuite = null;
            }

            it(testName, testFunction) {
                if (!this.currentSuite) {
                    throw new Error('Test must be inside a describe block');
                }
                
                this.currentSuite.tests.push({
                    name: testName,
                    fn: testFunction,
                    status: 'pending'
                });
            }

            async runTests() {
                const startTime = Date.now();
                let testIndex = 0;
                const totalTests = this.tests.reduce((sum, suite) => sum + suite.tests.length, 0);

                for (const suite of this.tests) {
                    for (const test of suite.tests) {
                        try {
                            await test.fn();
                            test.status = 'passed';
                            this.results.passed++;
                        } catch (error) {
                            test.status = 'failed';
                            test.error = error.message;
                            this.results.failed++;
                        }
                        
                        testIndex++;
                        this.results.total = testIndex;
                        this.updateProgress(testIndex, totalTests);
                        this.updateStats();
                        
                        // Small delay to show progress
                        await new Promise(resolve => setTimeout(resolve, 50));
                    }
                }

                const endTime = Date.now();
                console.log(`Tests completed in ${endTime - startTime}ms`);
                this.displayResults();
            }

            updateProgress(current, total) {
                const progressFill = document.getElementById('testProgress');
                const percentage = (current / total) * 100;
                progressFill.style.width = `${percentage}%`;
            }

            updateStats() {
                document.getElementById('passedCount').textContent = this.results.passed;
                document.getElementById('failedCount').textContent = this.results.failed;
                document.getElementById('skippedCount').textContent = this.results.skipped;
                document.getElementById('totalCount').textContent = this.results.total;
            }

            displayResults() {
                const resultsContainer = document.getElementById('testResults');
                resultsContainer.innerHTML = '';

                this.tests.forEach(suite => {
                    const suiteElement = document.createElement('div');
                    suiteElement.className = 'test-suite';
                    
                    const headerElement = document.createElement('div');
                    headerElement.className = 'test-suite-header';
                    headerElement.textContent = suite.name;
                    suiteElement.appendChild(headerElement);

                    suite.tests.forEach(test => {
                        const testElement = document.createElement('div');
                        testElement.className = `test-case ${test.status}`;
                        
                        const nameElement = document.createElement('div');
                        nameElement.className = 'test-name';
                        nameElement.textContent = test.name;
                        
                        const statusElement = document.createElement('div');
                        statusElement.className = `test-status ${test.status}`;
                        statusElement.textContent = test.status.toUpperCase();
                        
                        testElement.appendChild(nameElement);
                        testElement.appendChild(statusElement);
                        
                        if (test.error) {
                            const outputElement = document.createElement('div');
                            outputElement.className = 'test-output';
                            outputElement.textContent = test.error;
                            testElement.appendChild(outputElement);
                        }
                        
                        suiteElement.appendChild(testElement);
                    });

                    resultsContainer.appendChild(suiteElement);
                });
            }
        }

        // Custom assertion library
        const expect = (actual) => ({
            toBe: (expected) => {
                if (actual !== expected) {
                    throw new Error(`Expected ${actual} to be ${expected}`);
                }
            },
            toEqual: (expected) => {
                if (JSON.stringify(actual) !== JSON.stringify(expected)) {
                    throw new Error(`Expected ${JSON.stringify(actual)} to equal ${JSON.stringify(expected)}`);
                }
            },
            toBeTruthy: () => {
                if (!actual) {
                    throw new Error(`Expected ${actual} to be truthy`);
                }
            },
            toBeFalsy: () => {
                if (actual) {
                    throw new Error(`Expected ${actual} to be falsy`);
                }
            },
            toContain: (expected) => {
                if (!actual.includes(expected)) {
                    throw new Error(`Expected ${actual} to contain ${expected}`);
                }
            },
            toHaveLength: (expected) => {
                if (actual.length !== expected) {
                    throw new Error(`Expected length ${actual.length} to be ${expected}`);
                }
            },
            toBeInstanceOf: (expected) => {
                if (!(actual instanceof expected)) {
                    throw new Error(`Expected ${actual} to be instance of ${expected.name}`);
                }
            }
        });

        // Mock functions
        const mock = () => {
            const calls = [];
            const fn = (...args) => {
                calls.push(args);
                return fn.mockReturnValue;
            };
            fn.calls = calls;
            fn.mockReturnValue = undefined;
            fn.mockImplementation = (impl) => {
                fn.mockImplementation = impl;
            };
            return fn;
        };

        // Initialize test framework
        const testFramework = new TestFramework();

        // Mock the application state and functions for testing
        const state = {
            currentJobId: null,
            websocket: null,
            authToken: null,
            backendUrl: 'http://localhost:8000',
            isConnected: false,
            selectedFile: null,
            sandpackClient: null
        };

        // Mock functions from the main application
        function loadSettings() {
            state.authToken = localStorage.getItem('apiKey') || 'test-token';
            state.backendUrl = localStorage.getItem('backendUrl') || 'http://localhost:8000';
        }

        function saveSettings() {
            localStorage.setItem('apiKey', document.getElementById('apiKey').value);
            localStorage.setItem('backendUrl', document.getElementById('backendUrl').value);
        }

        function updateConnectionStatus(connected) {
            const statusEl = document.getElementById('connectionStatus');
            if (connected) {
                statusEl.className = 'connection-status connected';
                statusEl.querySelector('span').textContent = 'متصل';
            } else {
                statusEl.className = 'connection-status disconnected';
                statusEl.querySelector('span').textContent = 'قطع شده';
            }
        }

        function addChatMessage(sender, content, type = 'agent') {
            const chatMessages = document.getElementById('chatMessages');
            const messageEl = document.createElement('div');
            messageEl.className = `chat-message ${type}`;
            messageEl.innerHTML = `
                <div class="chat-message-header">
                    ${sender}
                    <span class="chat-message-time">${new Date().toLocaleTimeString()}</span>
                </div>
                <div>${DOMPurify.sanitize(content)}</div>
            `;
            chatMessages.appendChild(messageEl);
        }

        function addLogEntry(message, level = 'info') {
            const logsContainer = document.getElementById('logsContainer');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${level}`;
            logEntry.innerHTML = `<span>[${level.toUpperCase()}]</span> ${new Date().toLocaleTimeString()} - ${DOMPurify.sanitize(message)}`;
            logsContainer.appendChild(logEntry);
        }

        function updateProgress(progressData) {
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const currentStep = document.getElementById('currentStep');
            
            if (progressData.progress !== undefined) {
                progressFill.style.width = `${progressData.progress}%`;
            }
            
            if (progressData.current_step) {
                progressText.textContent = progressData.current_step;
            }
            
            if (progressData.step_number !== undefined && progressData.total_steps !== undefined) {
                currentStep.textContent = `مرحله ${progressData.step_number} از ${progressData.total_steps}`;
            }
        }

        function updateSystemStats() {
            // Mock system stats update
            document.getElementById('activeJobs').textContent = Math.floor(Math.random() * 10);
            document.getElementById('totalJobs').textContent = Math.floor(Math.random() * 100) + 50;
            document.getElementById('cpuUsage').textContent = `${Math.floor(Math.random() * 50) + 25}%`;
            document.getElementById('memoryUsage').textContent = `${Math.floor(Math.random() * 40) + 30}%`;
            document.getElementById('avgResponseTime').textContent = `${Math.floor(Math.random() * 100) + 50}ms`;
            document.getElementById('uptime').textContent = `${Math.floor(Math.random() * 24) + 1}h`;
        }

        // Test Suites
        testFramework.describe('Application State Management', () => {
            testFramework.it('should initialize with default values', () => {
                expect(state.currentJobId).toBe(null);
                expect(state.isConnected).toBe(false);
                expect(state.backendUrl).toBe('http://localhost:8000');
            });

            testFramework.it('should load settings from localStorage', () => {
                localStorage.setItem('apiKey', 'test-key');
                localStorage.setItem('backendUrl', 'http://test.example.com');
                
                loadSettings();
                
                expect(state.authToken).toBe('test-key');
                expect(state.backendUrl).toBe('http://test.example.com');
            });

            testFramework.it('should save settings to localStorage', () => {
                document.getElementById('apiKey').value = 'new-test-key';
                document.getElementById('backendUrl').value = 'http://new.example.com';
                
                saveSettings();
                
                expect(localStorage.getItem('apiKey')).toBe('new-test-key');
                expect(localStorage.getItem('backendUrl')).toBe('http://new.example.com');
            });
        });

        testFramework.describe('UI Components', () => {
            testFramework.it('should update connection status correctly', () => {
                updateConnectionStatus(true);
                const statusEl = document.getElementById('connectionStatus');
                expect(statusEl.className).toContain('connected');
                
                updateConnectionStatus(false);
                expect(statusEl.className).toContain('disconnected');
            });

            testFramework.it('should add chat messages with proper structure', () => {
                const initialCount = document.getElementById('chatMessages').children.length;
                
                addChatMessage('Test Agent', 'Test message', 'agent');
                
                const newCount = document.getElementById('chatMessages').children.length;
                expect(newCount).toBe(initialCount + 1);
                
                const lastMessage = document.getElementById('chatMessages').lastElementChild;
                expect(lastMessage.className).toContain('chat-message agent');
            });

            testFramework.it('should add log entries with correct format', () => {
                const initialCount = document.getElementById('logsContainer').children.length;
                
                addLogEntry('Test log message', 'info');
                
                const newCount = document.getElementById('logsContainer').children.length;
                expect(newCount).toBe(initialCount + 1);
                
                const lastLog = document.getElementById('logsContainer').lastElementChild;
                expect(lastLog.className).toContain('log-entry info');
                expect(lastLog.textContent).toContain('Test log message');
            });

            testFramework.it('should update progress correctly', () => {
                const progressData = {
                    progress: 50,
                    current_step: 'Testing step',
                    step_number: 3,
                    total_steps: 8
                };
                
                updateProgress(progressData);
                
                const progressFill = document.getElementById('progressFill');
                const progressText = document.getElementById('progressText');
                const currentStep = document.getElementById('currentStep');
                
                expect(progressFill.style.width).toBe('50%');
                expect(progressText.textContent).toBe('Testing step');
                expect(currentStep.textContent).toContain('مرحله 3 از 8');
            });
        });

        testFramework.describe('Form Handling', () => {
            testFramework.it('should have all required form elements', () => {
                const form = document.getElementById('projectForm');
                expect(form).toBeTruthy();
                
                const requiredFields = ['projectName', 'projectType', 'projectDescription'];
                requiredFields.forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    expect(field).toBeTruthy();
                });
            });

            testFramework.it('should populate form with test data', () => {
                const projectName = document.getElementById('projectName');
                const projectDescription = document.getElementById('projectDescription');
                
                projectName.value = 'Test Project';
                projectDescription.value = 'Test Description';
                
                expect(projectName.value).toBe('Test Project');
                expect(projectDescription.value).toBe('Test Description');
            });

            testFramework.it('should handle multiple language selection', () => {
                const languagesSelect = document.getElementById('languages');
                const options = languagesSelect.querySelectorAll('option');
                
                expect(options.length).toBe(2); // Python and JavaScript
                
                options[0].selected = true;
                options[1].selected = true;
                
                const selectedValues = Array.from(languagesSelect.selectedOptions).map(opt => opt.value);
                expect(selectedValues).toContain('python');
                expect(selectedValues).toContain('javascript');
            });
        });

        testFramework.describe('System Statistics', () => {
            testFramework.it('should update all stat elements', () => {
                const statElements = [
                    'activeJobs', 'totalJobs', 'cpuUsage', 
                    'memoryUsage', 'avgResponseTime', 'uptime'
                ];
                
                updateSystemStats();
                
                statElements.forEach(elementId => {
                    const element = document.getElementById(elementId);
                    expect(element.textContent).toBeTruthy();
                    expect(element.textContent).not.toBe('0');
                });
            });

            testFramework.it('should format stats correctly', () => {
                updateSystemStats();
                
                const cpuUsage = document.getElementById('cpuUsage').textContent;
                const memoryUsage = document.getElementById('memoryUsage').textContent;
                const avgResponseTime = document.getElementById('avgResponseTime').textContent;
                const uptime = document.getElementById('uptime').textContent;
                
                expect(cpuUsage).toContain('%');
                expect(memoryUsage).toContain('%');
                expect(avgResponseTime).toContain('ms');
                expect(uptime).toContain('h');
            });
        });

        testFramework.describe('Modal Management', () => {
            testFramework.it('should have modal elements', () => {
                const settingsModal = document.getElementById('settingsModal');
                const uploadModal = document.getElementById('uploadModal');
                
                expect(settingsModal).toBeTruthy();
                expect(uploadModal).toBeTruthy();
                expect(settingsModal.className).toContain('modal');
                expect(uploadModal.className).toContain('modal');
            });

            testFramework.it('should contain required modal inputs', () => {
                const apiKeyInput = document.getElementById('apiKey');
                const backendUrlInput = document.getElementById('backendUrl');
                const uploadFileInput = document.getElementById('uploadFile');
                const uploadPathInput = document.getElementById('uploadPath');
                
                expect(apiKeyInput).toBeTruthy();
                expect(backendUrlInput).toBeTruthy();
                expect(uploadFileInput).toBeTruthy();
                expect(uploadPathInput).toBeTruthy();
                
                expect(apiKeyInput.type).toBe('password');
                expect(backendUrlInput.type).toBe('url');
                expect(uploadFileInput.type).toBe('file');
            });
        });

        testFramework.describe('File Tree Management', () => {
            testFramework.it('should have file tree container', () => {
                const fileTree = document.getElementById('fileTree');
                const fileTreeCard = document.getElementById('fileTreeCard');
                
                expect(fileTree).toBeTruthy();
                expect(fileTreeCard).toBeTruthy();
                expect(fileTreeCard.style.display).toBe('none'); // Initially hidden
            });

            testFramework.it('should handle file tree updates', () => {
                const fileTree = document.getElementById('fileTree');
                const fileTreeCard = document.getElementById('fileTreeCard');
                
                // Simulate file tree update
                fileTree.innerHTML = `
                    <div class="file-item">
                        <span class="material-symbols-outlined file-icon">description</span>
                        <span>test.py</span>
                    </div>
                `;
                fileTreeCard.style.display = 'block';
                
                expect(fileTree.children.length).toBe(1);
                expect(fileTreeCard.style.display).toBe('block');
                expect(fileTree.textContent).toContain('test.py');
            });
        });

        testFramework.describe('Code Editor Integration', () => {
            testFramework.it('should have sandpack container', () => {
                const sandpackContainer = document.getElementById('sandpack-container');
                expect(sandpackContainer).toBeTruthy();
            });

            testFramework.it('should handle code display', () => {
                const sandpackContainer = document.getElementById('sandpack-container');
                
                // Simulate code loading
                sandpackContainer.innerHTML = `
                    <div style="padding: 1rem;">
                        <pre>print("Hello, World!")</pre>
                    </div>
                `;
                
                expect(sandpackContainer.innerHTML).toContain('print("Hello, World!")');
            });
        });

        testFramework.describe('Data Sanitization', () => {
            testFramework.it('should sanitize HTML content', () => {
                const maliciousContent = '<script>alert("xss")</script><p>Safe content</p>';
                const sanitized = DOMPurify.sanitize(maliciousContent);
                
                expect(sanitized).not.toContain('<script>');
                expect(sanitized).toContain('<p>Safe content</p>');
            });

            testFramework.it('should preserve safe HTML', () => {
                const safeContent = '<div><p>Safe <strong>content</strong></p></div>';
                const sanitized = DOMPurify.sanitize(safeContent);
                
                expect(sanitized).toBe(safeContent);
            });
        });

        testFramework.describe('Error Handling', () => {
            testFramework.it('should handle missing elements gracefully', () => {
                // Test with non-existent element
                const nonExistentElement = document.getElementById('nonExistent');
                expect(nonExistentElement).toBeFalsy();
                
                // Ensure functions don't crash with missing elements
                expect(() => {
                    updateConnectionStatus(true);
                    addChatMessage('Test', 'Message');
                    addLogEntry('Test log');
                }).not.toThrow();
            });
        });

        // Run tests function
        async function runAllTests() {
            const runButton = document.getElementById('runTestsBtn');
            runButton.disabled = true;
            runButton.textContent = 'Running Tests...';
            
            // Reset results
            testFramework.results = {
                passed: 0,
                failed: 0,
                skipped: 0,
                total: 0
            };
            
            // Reset progress
            document.getElementById('testProgress').style.width = '0%';
            
            try {
                await testFramework.runTests();
            } catch (error) {
                console.error('Test execution failed:', error);
            } finally {
                runButton.disabled = false;
                runButton.textContent = 'Run All Tests';
                
                // Show summary
                const { passed, failed, total } = testFramework.results;
                const successRate = ((passed / total) * 100).toFixed(1);
                console.log(`Test Summary: ${passed}/${total} passed (${successRate}%)`);
                
                if (failed === 0) {
                    runButton.style.background = 'var(--test-success)';
                    runButton.textContent = '✅ All Tests Passed!';
                } else {
                    runButton.style.background = 'var(--test-error)';
                    runButton.textContent = `❌ ${failed} Test(s) Failed`;
                }
                
                setTimeout(() => {
                    runButton.style.background = 'var(--test-info)';
                    runButton.textContent = 'Run All Tests';
                }, 3000);
            }
        }

        // Auto-run tests when page loads
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Frontend Test Suite Loaded');
            
            // Initialize mock data
            loadSettings();
            updateSystemStats();
            
            console.log('Ready to run tests. Click "Run All Tests" button or call runAllTests()');
        });
    </script>
</body>
</html>